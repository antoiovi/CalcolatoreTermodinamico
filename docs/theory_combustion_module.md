# Theory  
## Boiler Combustion & Chimney Module  
### UNI EN 13384-1 Based Implementation

---

# 1. Introduction

This module implements thermodynamic and fluid dynamic calculations for chimney systems and combustion products according to:

UNI EN 13384-1  
_Chimneys – Thermal and fluid dynamic calculation methods – Part 1: Chimneys serving one heating appliance._

The purpose of this module is to compute:

- Flue gas mass flow rate
- Thermophysical properties of combustion products
- Partial pressure of water vapor
- Dew point temperature
- Condensation risk
- Minimum chimney draft

The implementation is intended for engineering applications in HVAC, energy systems, and chimney design.

---

# 2. Combustion Model

## 2.0 Example calculation

![Boiler calculation](screenshots/boiler_calculation.png)


## 2.1 Fuel Characterization

Each fuel is characterized by:

- Lower heating value (LHV)
- Stoichiometric air requirement
- Theoretical CO2 production
- Water vapor formation

Combustion is modeled assuming steady-state operation.

---

## 2.2 Combustion Equation (General Form)

For a generic hydrocarbon fuel:

C_xH_y + a(O2 +3.76 N2)--> b CO2 + c H2O + d O2 + e N2

Where:

- Excess air is considered
- CO2 percentage can be used to back-calculate excess air
- Nitrogen is treated as inert

---

## 2.3 Flue Gas Mass Flow Rate

If not provided by the user, flue gas mass flow is computed from:

- Boiler thermal power
- Fuel lower heating value
- Combustion efficiency

General relation:

m_fuel = P / (LHV × η)

Flue gas mass flow:

m_flue = m_fuel × (1 + air_factor)

---

# 3. Thermophysical Properties of Flue Gas

The combustion products mixture is treated as an ideal gas mixture.

The module computes:

- Gas constant R
- Specific heat capacity Cp
- Thermal conductivity λ
- Dynamic viscosity μ

These properties depend on:

- Temperature
- Gas composition
- Water vapor content

---

# 4. Water Vapor and Dew Point

## 4.1 Water Vapor Partial Pressure

The partial pressure of water vapor is computed as:

P_H2O = y_H2O × P_total

Where:

- y_H2O = molar fraction of water vapor
- P_total = system pressure (typically 101325 Pa)

---

## 4.2 Dew Point Temperature

The dew point temperature is obtained by solving:

P_H2O = P_sat(T_dew)

Where:

- P_sat is the saturation vapor pressure curve
- T_dew is the temperature at which condensation begins

This is solved numerically.

---

## 4.3 Dew Point Increase (ΔTsp)

In real combustion systems, acidic components (e.g., SO2 → SO3 → H2SO4) may increase condensation temperature.

The module estimates:

ΔT_dew = function(fuel composition, sulfur content)

---

# 5. Chimney Draft Calculation

## 5.1 Natural Draft Principle

Chimney draft is generated by density difference:

ΔP = g × H × (ρ_outside − ρ_flue)

Where:

- g = gravitational acceleration
- H = chimney height
- ρ = gas density

---

## 5.2 Minimum Required Draft

The minimum draft must satisfy:

ΔP_available ≥ ΔP_losses

Losses include:

- Friction losses
- Local pressure drops
- System resistances

The module computes the minimum draft required to ensure proper evacuation of flue gases.

---

# 6. Assumptions

The current implementation assumes:

- Steady-state conditions
- Ideal gas behavior
- Uniform flue gas temperature at boiler outlet
- Atmospheric pressure unless otherwise specified
- Single appliance chimney system (EN 13384-1)

---

# 7. Numerical Methods

The following numerical approaches are used:

- Direct algebraic evaluation for mixture properties
- Iterative solution for dew point temperature
- Standard thermodynamic correlations

All calculations are deterministic and reproducible.

---

# 8. Engineering Applications

This module can be used for:

- Chimney sizing
- Condensation risk analysis
- Boiler diagnostics
- HVAC system design
- Energy efficiency studies
- Academic teaching

---

# 9. Limitations

This implementation does not currently include:

- Transient analysis
- Multi-appliance chimney systems (EN 13384-2)
- Detailed chemical kinetics
- Pollutant formation modeling (NOx, CO)

Future development may extend the model.

---

# 10. Transparency and Open Engineering

All formulas are implemented explicitly in source code.

The objective of this open-source module is to provide:

- Transparent engineering calculations
- Reproducible results
- Educational clarity
- Free access to professional-grade tools

Engineering knowledge should be open, verifiable, and shared.

---

# References

- UNI EN 13384-1
- Classical combustion theory
- Ideal gas mixture thermodynamics
- Standard HVAC engineering literature
